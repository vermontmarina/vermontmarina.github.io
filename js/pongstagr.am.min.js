/*! ========================================================================== 
 * pongstagr.am v3.0.4 jQuery Plugin | http://pongstr.github.io/pongstagr.am/ 
 * =========================================================================== 
 * Copyright (c) 2014 Pongstr Ordillo. Licensed under MIT License. 
 * =========================================================================== */
+function(a){"use strict";var b=function(a,b){return this.element=a,this.options=b,this};b.defaults={accessId:null,accessToken:null,count:8,likes:!0,comments:!0,timestamp:!0,effects:"scaling",show:"recent",preload:"spinner",button:"btn btn-success pull-right",buttontext:"Load more",column:"col-xs-12 col-sm-3 col-md-3 col-lg-3",likeicon:"glyphicon glyphicon-heart",muteicon:"glyphicon glyphicon-volume-off",videoicon:"glyphicon glyphicon-play",commenticon:"glyphicon glyphicon-comment",picture_size:64,show_counts:!0,profile_bg_img:null,profile_bg_color:"#d9534f"},b.prototype.template={loadmore:function(b){var c='<div class="row">';c+='  <button class="'+b.button+'" data-paginate="'+b.show+'">',c+=b.buttontext,c+="  </button>",c+="</div>","before"!==b.insert?a(b.target).after(c):a(b.target).before(c)},profile:function(b){var c='<div class="row pongstgrm-profile">';c+=' <div class="col-xs-12 text-center">',c+='   <div class="thumbnail">',c+='     <img src="'+b.profile_picture+'" width="'+b.picture_size+'"  height="'+b.picture_size+'" alt="'+b.username+'">',c+="   </div>",c+='   <div class="counts">',c+='     <span class="h4">'+b.media+" <small>Posts</small></span>",c+='     <span class="h4">'+b.followed_by+" <small>Followers</small></span>",c+='     <span class="h4">'+b.follows+" <small>Following</small></span>",c+="   </div>",c+='   <div class="user-data">',c+="     <h3>"+b.username+"</h3>",c+="     <small>"+b.full_name+' - <a href="'+b.website+'">'+b.website+"</a></small>",c+="     <p>"+b.bio+"</p>",c+="   </div>",c+=" </div>",c+="</div>",a(b.target).append(c).css({"background-image":"url("+b.profile_bg_img+")","background-color":b.profile_bg_color})},thumb:function(b){var c='<div class="'+b.dflt.column+'">';c+=' <div class="thumbnail text-center '+b.dflt.effects+'">',b.dflt.timestamp!==!1?c+="<strong>"+b.data.timestamp+"</strong>":null,c+='   <div class="'+b.dflt.preload+'" id="'+b.dflt.show+"-"+b.data.id+'-thmb-loadr" />',c+='   <a href="#'+b.data.id+'" id="triggr-'+b.data.id+'">',c+='     <img id="'+b.dflt.show+"-"+b.data.id+'-thmb" src="'+b.data.thumbnail+'" alt="'+b.data.caption+'">',c+="   </a>","video"===b.data.type?c+='<span class="type"><i class="'+b.dflt.videoicon+'"></i></span>':"",b.data.likes!==!1?c+='<span class="likes"><i class="'+b.dflt.likeicon+'"></i>&nbsp; '+b.data.likes_count+"</span>":"",b.data.comments!==!1?c+='<span class="comments"><i class="'+b.dflt.commenticon+'"></i>&nbsp; '+b.data.comments_count+"</span>":"",c+=" </div>",c+="</div>",a(b.target).append(c)},bsmodal:function(c){var d='<div class="alert">Your browser does not support HTML5 Videos or MPEG-4 format.</div>',e='<div class="'+c.dflt.preload+'" id="'+c.data.id+'-full-loadr"></div>';e+='<img id="'+c.data.id+'-full" src="'+c.data.image+'" alt="'+c.data.caption+'">';var f='<video id="'+c.data.id+'-video" width="100%" height="auto">';f+='  <source src="'+c.data.video+'" type="video/mp4">',f+=d,f+="</video>",f+='<button type="button" class="btn btn-lg" id="play-pause"><i class="glyphicon glyphicon-play"></i></button>',f+='<button type="button" class="btn btn-lg" id="mute"><i class="glyphicon glyphicon-volume-up"></i></button>';var g='<div id="'+c.data.id+'" class="modal fade">';g+='  <div class="modal-dialog">',g+='    <div class="modal-content">',g+='      <div class="modal-body">',g+='        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>',g+='        <div class="row">',g+='<div class="media-column">',g+="video"!==c.data.type?e:navigator.userAgent.match(/webkit/i)||navigator.userAgent.match(/(iPod|iPhone|iPad)/)?f:d+e,g+="</div>",g+='<div class="media-comment">',g+='<div class="media">',g+='  <a href="https://instagram.com/'+c.data.username+'" class="media-object thumbnail pull-left">',g+='    <img src="'+c.data.profile_picture+'" width="'+c.dflt.picture_size+'" height="'+c.dflt.picture_size+'" class="">',g+="  </a>",g+='  <div class="modal-body">',g+='      <h5 class="media-heading">',g+='        <a href="https://instagram.com/'+c.data.username+'">'+c.data.username+"</a>",g+="      </h5>",null!==c.data.caption?g+="      <p>"+c.data.caption+"</p>":"",g+="  </div>",g+="</div>",0!==c.data.comments_count?a.each(c.data.comments_data,function(a,b){g+='<div class="media">',g+='  <a href="https://instagram.com/'+b.from.username+'" class="media-object thumbnail pull-left">',g+='    <img src="'+b.from.profile_picture+'" width="'+c.dflt.picture_size+'" height="'+c.dflt.picture_size+'">',g+="  </a>",g+='  <div class="modal-body">',g+='      <h5 class="media-heading">',g+='        <a href="https://instagram.com/'+b.from.username+'">'+b.from.username+"</a>",g+="      </h5>",g+="      <p>"+b.text+"</p>",g+="  </div>",g+="</div>"}):"",g+="        </div>",g+="      </div>",g+="    </div>",g+="  </div>",g+="</div>",a("#triggr-"+c.data.id).on("click",function(d){d.preventDefault(),a("body").append(g),a("#"+c.data.id).modal("show").on("shown.bs.modal",function(){var a=document.getElementById(c.data.id+"-video");b.prototype.preloadMedia({imgid:"#"+c.data.id+"-full",loadr:"#"+c.data.id+"-full-loadr"}),b.prototype.videoBtn({trigger:"#play-pause",child:"i",classes:"glyphicon-play glyphicon-pause"},function(){a.paused===!0?a.play():a.pause()}),b.prototype.videoBtn({trigger:"#mute",child:"i",classes:"glyphicon-volume-up glyphicon-volume-off"},function(){a.muted=a.muted===!1?!0:!1})}).on("hidden.bs.modal",function(){a(this).remove()})})}},b.prototype.preloadMedia=function(b){var c=a(b.imgid),d=0;c.one("load",function(){++d===c.length&&a(b.loadr).fadeOut(),a(this).addClass("fade")}).each(function(){this.complete&&a(this).load()})},b.prototype.videoBtn=function(b,c){a(b.trigger).on("click",function(d){d.preventDefault(),c(),a(b.child,this).toggleClass(b.classes)})},b.prototype.stream=function(){function c(b){void 0===b.url||null===b.url?a("[data-paginate="+b.show+"]").on("click",function(b){a(this).removeClass().addClass("btn btn-default").attr("disabled","disabled"),b.preventDefault()}):a("[data-paginate="+b.show+"]").on("click",function(c){c.preventDefault(),f({url:b.url,opt:b.opt}),a(this).unbind(c)})}function d(c,d){a.each(c,function(a,c){var e=new Date(1e3*c.created_time),f=e.toDateString(),h={dflt:d,target:g,data:{id:c.id,type:c.type,video:c.videos&&c.videos.standard_resolution.url,image:c.images.standard_resolution.url,caption:c.caption&&c.caption.text,username:c.user.username,timestamp:f,thumbnail:c.images.low_resolution.url,likes_count:c.likes.count,comments_count:c.comments.count,comments_data:c.comments.data,profile_picture:c.user.profile_picture}};b.prototype.template.thumb(h),b.prototype.preloadMedia({imgid:"#"+d.show+"-"+c.id+"-thmb",loadr:"#"+d.show+"-"+c.id+"-thmb-loadr"}),b.prototype.template.bsmodal(h)})}function e(a,c){b.prototype.template.profile({target:g,bio:a.bio,media:a.counts.media,website:a.website,follows:a.counts.follows,username:a.username,full_name:a.full_name,followed_by:a.counts.followed_by,picture_size:c.picture_size,profile_bg_img:c.profile_bg_img,profile_picture:a.profile_picture,profile_bg_color:c.profile_bg_color})}function f(b){a.ajax({url:b.url,cache:!0,method:"GET",dataType:"jsonp",success:function(a){"profile"!==b.opt.show?d(a.data,b.opt):e(a.data,b.opt),"profile"!==b.opt.show&&c({show:b.opt.show,url:a.pagination.next_url,opt:b.opt})}})}var g=this.element,h=this.options,i="https://api.instagram.com/v1/users/",j="?count="+h.count+"&access_token="+h.accessToken;switch(h.show){case"liked":f({url:i+"self/media/liked"+j,opt:h});break;case"feed":f({url:i+"self/feed"+j,opt:h});break;case"profile":f({url:i+h.accessId+"?access_token="+h.accessToken,opt:h});break;case"recent":f({url:i+h.accessId+"/media/recent"+j,opt:h});break;default:f({url:"https://api.instagram.com/v1/tags/"+h.show+"/media/recent"+j,opt:h})}},b.prototype.create=function(){var c=this.element,d=this.options;a(c).attr("data-type",d.show).addClass("pongstagrm row"),"profile"!==d.show&&b.prototype.template.loadmore({show:d.show,target:c,button:d.button,buttontext:d.buttontext}),this.stream()},b.prototype.start=function(){var a=this.options;return null!==a.accessId||null!==a.accessToken?(this.create(),void 0):void 0},a.fn.pongstgrm=function(c){var d=a.extend({},b.defaults,c);return this.each(function(){var c=new b(a(this)[0],d);c.start()})},a.fn.pongstgrm.defaults=b.options}(window.jQuery);